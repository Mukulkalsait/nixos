{ config, pkgs, inputs, nur, ... }:
{
  import = [
    nur.repos.charmbracelet.modules.crush
  ];
  programs.crush = {
    enable = true;
    settings = {
      providers = {
        openai = {
          id = "openai";
          name = "OpenAI";
          base_url = "https://api.openai.com/v1";
          type = "openai";
          api_key = "sk-fake123456789abcdef...";
          models = [
            {
              id = "gpt-4";
              name = "GPT-4";
            }
          ];
        };
      };
      lsp = {
        go = { command = "gopls"; enabled = true; };
        nix = { command = "nil"; enabled = true; };
      };
      options = {
        context_paths = [ "/etc/nixos/configuration.nix" ];
        tui = { compact_mode = true; };
        debug = false;
      };
    };
  };
}
